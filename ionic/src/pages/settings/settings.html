<!--
  Generated template for the SettingsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Settings</ion-title>
  </ion-navbar>

</ion-header>

<ion-content>
    <ion-list>
      <ion-item>
        <ion-label stacked>MQTT Broker Url</ion-label>
        <ion-input type="text" placeholder="e.g. broker.hivemq.com" [(ngModel)]="input.url"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label stacked>MQTT Broker Port</ion-label>
        <ion-input type="number" placeholder="e.g. 8000" [(ngModel)]="input.port"></ion-input>
      </ion-item>
    </ion-list>
    <div text-center padding-bottom>
      <button ion-button (click)="addMQTTServer()">
        Add New MQTT Broker
      </button>
    </div>
    <ion-list>
      <ion-item-group>
        <ion-item-divider color="light">
          MQTT Server List
        </ion-item-divider>
        <ion-item *ngFor="let broker of mqtt.getRegisteredBrokerList() | async">
          <h2>
            <b>{{ broker.url }}</b>
            <ion-icon *ngIf="broker.default" color="secondary" name="ios-checkmark-circle"></ion-icon>
          </h2>
          <p>Port: {{ broker.port }}</p>
          <button *ngIf="!broker.default" ion-button clear item-right (click)="setAsDefaultMQTTServer(broker)">Set as Default</button>
          <button ion-button clear icon-only item-right (click)="removeMQTTServer(broker)">
            <ion-icon name="trash"></ion-icon>
          </button>
        </ion-item>
      </ion-item-group>
    </ion-list>
  
  </ion-content>
